{"ast":null,"code":"import { NOTIFICATION_TYPE, USER_ACCOUNT_TYPE } from '../constants';\nimport { Notification } from './notification';\nconst log = console.log;\nexport const sendAlertHandler = (ctx, location) => {\n  log('Alerting users...');\n  const users = ctx.state.userDB;\n\n  for (let key in users) {\n    let user = users[key];\n\n    if (user.type === USER_ACCOUNT_TYPE && _wasUserCheckedIn(user, location)) {\n      let notif = new Notification(NOTIFICATION_TYPE.alert, 'You May Have COVID', `A covid case has been reported at ${location.name}`);\n      user.notifications.push(notif);\n      users[key] = user;\n    }\n  }\n\n  ctx.setState({\n    userDB: users\n  }, () => {\n    log('Successfully alerted users ' + JSON.stringify(ctx.state.userDB));\n  });\n};\n\nconst _wasUserCheckedIn = (user, location) => {\n  const locs = user.checkInHistory;\n\n  for (let loc in locs) {\n    if (loc.id === location.id) {\n      return true;\n    }\n  }\n\n  return false;\n};\n\nexport const addLocationHandler = (ctx, addLocCtx) => {\n  log(\"Adding new location...\");\n  const locDB = ctx.state.locationsDB;\n  const {\n    locationName,\n    address,\n    imageUrl,\n    maxOccupancy,\n    description\n  } = addLocCtx.state;\n  let newLoc = new Location(locationName, maxOccupancy, address, description, imageUrl);\n  locDB[newLoc.id] = newLoc;\n  ctx.setState({\n    locationsDB: locDB\n  });\n  log(\"Successfully added new location to DB\");\n};\n\nconst _locationInputValidate = reminderCtx => {\n  log('Validating reminder inputs...');\n\n  const isCategoryValid = _isInvalid(reminderCtx.state.category);\n\n  const isSubCategoryValid = _isInvalid(reminderCtx.state.subCategory);\n\n  const isNameValid = _isInvalid(reminderCtx.state.reminderName);\n\n  const isDateTimeValid = _isInvalid(reminderCtx.state.reminderTime);\n\n  reminderCtx.setState({\n    isCategoryValid: isCategoryValid,\n    isSubCategoryValid: isSubCategoryValid,\n    isNameValid: isNameValid,\n    isDateTimeValid: isDateTimeValid\n  });\n  return isCategoryValid && isSubCategoryValid && isNameValid && isDateTimeValid;\n};\n\nconst _isInvalid = value => {\n  return value !== null && value !== undefined && value !== '' && value !== 'select';\n};","map":{"version":3,"sources":["/Users/cd/Desktop/team27/src/js/actions/adminCheckIn.js"],"names":["NOTIFICATION_TYPE","USER_ACCOUNT_TYPE","Notification","log","console","sendAlertHandler","ctx","location","users","state","userDB","key","user","type","_wasUserCheckedIn","notif","alert","name","notifications","push","setState","JSON","stringify","locs","checkInHistory","loc","id","addLocationHandler","addLocCtx","locDB","locationsDB","locationName","address","imageUrl","maxOccupancy","description","newLoc","Location","_locationInputValidate","reminderCtx","isCategoryValid","_isInvalid","category","isSubCategoryValid","subCategory","isNameValid","reminderName","isDateTimeValid","reminderTime","value","undefined"],"mappings":"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","sourcesContent":["import { NOTIFICATION_TYPE, USER_ACCOUNT_TYPE } from '../constants';\nimport { Notification } from './notification';\n\nconst log = console.log;\n\nexport const sendAlertHandler = (ctx, location) => {\n  log('Alerting users...');\n  const users = ctx.state.userDB;\n  for (let key in users) {\n    let user = users[key];\n    if (user.type === USER_ACCOUNT_TYPE && _wasUserCheckedIn(user, location)) {\n      let notif = new Notification(\n        NOTIFICATION_TYPE.alert,\n        'You May Have COVID',\n        `A covid case has been reported at ${location.name}`,\n      );\n      user.notifications.push(notif);\n      users[key] = user;\n    }\n  }\n\n  ctx.setState(\n    {\n      userDB: users,\n    },\n    () => {\n      log('Successfully alerted users ' + JSON.stringify(ctx.state.userDB));\n    },\n  );\n};\n\nconst _wasUserCheckedIn = (user, location) => {\n  const locs = user.checkInHistory;\n  for (let loc in locs) {\n    if (loc.id === location.id) {\n      return true;\n    }\n  }\n  return false;\n};\n\nexport const addLocationHandler = (ctx, addLocCtx) => {\n  log(\"Adding new location...\");\n  const locDB = ctx.state.locationsDB;\n  const { locationName, address, imageUrl, maxOccupancy, description } = addLocCtx.state;\n  let newLoc = new Location(locationName, maxOccupancy, address, description, imageUrl);\n  locDB[newLoc.id] = newLoc;\n  ctx.setState({\n    locationsDB: locDB\n  });\n  log(\"Successfully added new location to DB\");\n}\n\nconst _locationInputValidate = (reminderCtx) => {\n  log('Validating reminder inputs...');\n  const isCategoryValid = _isInvalid(reminderCtx.state.category);\n  const isSubCategoryValid = _isInvalid(reminderCtx.state.subCategory);\n  const isNameValid = _isInvalid(reminderCtx.state.reminderName);\n  const isDateTimeValid = _isInvalid(reminderCtx.state.reminderTime);\n  reminderCtx.setState({\n    isCategoryValid: isCategoryValid,\n    isSubCategoryValid: isSubCategoryValid,\n    isNameValid: isNameValid,\n    isDateTimeValid: isDateTimeValid,\n  });\n\n  return isCategoryValid && isSubCategoryValid && isNameValid && isDateTimeValid;\n};\n\nconst _isInvalid = (value) => {\n  return value !== null && value !== undefined && value !== '' && value !== 'select';\n};"]},"metadata":{},"sourceType":"module"}