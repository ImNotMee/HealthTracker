{"ast":null,"code":"import { NOTIFICATION_TYPE } from \"../constants\";\nexport const sendAlertHandler = (ctx, location) => {\n  const users = ctx.state.userDB;\n\n  for (let key in users) {\n    let user = users[key];\n\n    if (_wasUserCheckedIn(user, location)) {\n      let notif = new Notification(NOTIFICATION_TYPE.alert, \"You May Have COVID\", `A covid case has been reported at ${location.name}`);\n      user.notifications.push(notif);\n      users[key] = user;\n    }\n  }\n\n  ctx.setState({\n    userDB: users\n  });\n};\n\nconst _wasUserCheckedIn = (user, location) => {\n  const locs = user.location_history;\n\n  for (let loc in locs) {\n    if (loc.id === location.id) {\n      return true;\n    }\n  }\n\n  return false;\n};","map":{"version":3,"sources":["/Users/cd/Desktop/team27/src/js/actions/adminCheckIn.js"],"names":["NOTIFICATION_TYPE","sendAlertHandler","ctx","location","users","state","userDB","key","user","_wasUserCheckedIn","notif","Notification","alert","name","notifications","push","setState","locs","location_history","loc","id"],"mappings":"AAAA,SAASA,iBAAT,QAAkC,cAAlC;AAEA,OAAO,MAAMC,gBAAgB,GAAG,CAACC,GAAD,EAAMC,QAAN,KAAmB;AACjD,QAAMC,KAAK,GAAGF,GAAG,CAACG,KAAJ,CAAUC,MAAxB;;AACA,OAAK,IAAIC,GAAT,IAAgBH,KAAhB,EAAuB;AACrB,QAAII,IAAI,GAAGJ,KAAK,CAACG,GAAD,CAAhB;;AACA,QAAIE,iBAAiB,CAACD,IAAD,EAAOL,QAAP,CAArB,EAAuC;AACrC,UAAIO,KAAK,GAAG,IAAIC,YAAJ,CACVX,iBAAiB,CAACY,KADR,EAEV,oBAFU,EAGT,qCAAoCT,QAAQ,CAACU,IAAK,EAHzC,CAAZ;AAIAL,MAAAA,IAAI,CAACM,aAAL,CAAmBC,IAAnB,CAAwBL,KAAxB;AACAN,MAAAA,KAAK,CAACG,GAAD,CAAL,GAAaC,IAAb;AACD;AACF;;AAEDN,EAAAA,GAAG,CAACc,QAAJ,CAAa;AACXV,IAAAA,MAAM,EAAEF;AADG,GAAb;AAGD,CAjBM;;AAmBP,MAAMK,iBAAiB,GAAG,CAACD,IAAD,EAAOL,QAAP,KAAoB;AAC5C,QAAMc,IAAI,GAAGT,IAAI,CAACU,gBAAlB;;AACA,OAAK,IAAIC,GAAT,IAAgBF,IAAhB,EAAsB;AACpB,QAAIE,GAAG,CAACC,EAAJ,KAAWjB,QAAQ,CAACiB,EAAxB,EAA4B;AAC1B,aAAO,IAAP;AACD;AACF;;AACD,SAAO,KAAP;AACD,CARD","sourcesContent":["import { NOTIFICATION_TYPE } from \"../constants\";\n\nexport const sendAlertHandler = (ctx, location) => {\n  const users = ctx.state.userDB;\n  for (let key in users) {\n    let user = users[key]\n    if (_wasUserCheckedIn(user, location)) {\n      let notif = new Notification(\n        NOTIFICATION_TYPE.alert,\n        \"You May Have COVID\", \n        `A covid case has been reported at ${location.name}`);\n      user.notifications.push(notif);\n      users[key] = user\n    }\n  }\n\n  ctx.setState({\n    userDB: users\n  });\n}\n\nconst _wasUserCheckedIn = (user, location) => {\n  const locs = user.location_history;\n  for (let loc in locs) {\n    if (loc.id === location.id) {\n      return true;\n    }\n  }\n  return false;\n}"]},"metadata":{},"sourceType":"module"}